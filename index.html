<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MacEduTech | í•™ìŠµ ì§„ë‹¨ & ìŠ¤ì¼€ì¤„ëŸ¬ (Hub)</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    body{ font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .glass{ background: rgba(255,255,255,.72); backdrop-filter: blur(14px); border: 1px solid rgba(255,255,255,.35); }
    .shadow-soft{ box-shadow: 0 18px 60px rgba(2,6,23,.10); }
    .ring-soft{ box-shadow: 0 0 0 1px rgba(99,102,241,.18) inset; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:.6rem;
      border-radius: 999px; padding: 12px 16px; font-weight: 900; font-size: 13px;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size: 11px; padding: 3px 8px; border-radius: 999px;
      background:#0f172a; color:#fff;
    }
    /* iframe ë¡œë”© ì¤‘ í‘œì‹œ */
    .loader{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: rgba(2,6,23,.35);
      backdrop-filter: blur(6px);
      border-radius: 24px;
      opacity:0; pointer-events:none;
      transition: opacity .15s ease;
    }
    .loader.on{ opacity:1; pointer-events:auto; }
    .spinner{
      width:34px; height:34px; border-radius:999px;
      border:4px solid rgba(255,255,255,.28);
      border-top-color: rgba(255,255,255,.92);
      animation: spin 0.9s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg);} }
  </style>
</head>

<body class="min-h-screen bg-slate-950 text-white">
  <!-- Background -->
  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-br from-slate-950 via-indigo-950/40 to-slate-950"></div>
    <div class="absolute -top-40 -left-40 w-[520px] h-[520px] rounded-full blur-3xl opacity-40"
         style="background: radial-gradient(circle at 30% 30%, rgba(99,102,241,.65), transparent 60%);"></div>
    <div class="absolute -bottom-40 -right-40 w-[560px] h-[560px] rounded-full blur-3xl opacity-35"
         style="background: radial-gradient(circle at 70% 70%, rgba(16,185,129,.55), transparent 60%);"></div>
  </div>

  <main class="max-w-7xl mx-auto px-5 py-10 md:py-12">
    <!-- Header -->
    <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-2xl bg-white/10 ring-soft flex items-center justify-center shadow-soft">
          <span class="text-lg">ğŸ§ </span>
        </div>
        <div>
          <p class="text-[11px] tracking-[0.22em] uppercase text-white/60 font-black">MacEduTech Suite</p>
          <h1 class="text-2xl md:text-3xl font-black tracking-tight">í•™ìŠµ ì§„ë‹¨ Â· ë£¨í‹´ Â· ìŠ¤ì¼€ì¤„ëŸ¬ (í—ˆë¸Œ)</h1>
        </div>
      </div>

      <div class="flex flex-wrap gap-2">
        <span class="px-3 py-1 rounded-full bg-white/10 text-[11px] font-black text-white/80">GitHub Pages</span>
        <span class="px-3 py-1 rounded-full bg-white/10 text-[11px] font-black text-white/80">Hub + Iframe</span>
        <span class="px-3 py-1 rounded-full bg-white/10 text-[11px] font-black text-white/80">No Page Disappear</span>
      </div>
    </header>

    <!-- Layout: Left Hub / Right Viewer -->
    <section class="mt-7 grid grid-cols-1 lg:grid-cols-12 gap-5">
      <!-- LEFT: ê³ ì • í—ˆë¸Œ -->
      <div class="lg:col-span-4 p-7 rounded-[2.2rem] glass shadow-soft text-slate-900">
        <div class="flex items-center justify-between gap-2">
          <div>
            <div class="text-[10px] font-black tracking-widest text-slate-500 uppercase">Navigation</div>
            <h2 class="text-xl font-black mt-1">ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì—¬ì„¸ìš”</h2>
          </div>
          <button class="btn bg-slate-900 text-white shadow-soft hover:bg-black"
                  type="button" onclick="openInNewTab()">
            ğŸ”— ìƒˆ íƒ­
          </button>
        </div>

        <p class="mt-3 text-[13px] leading-relaxed text-slate-700 font-semibold">
          ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>í˜ì´ì§€ ì´ë™ì´ ì•„ë‹ˆë¼</b> ì˜¤ë¥¸ìª½ í™”ë©´ì— ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.<br/>
          ê·¸ë˜ì„œ ì´ ì²« í™”ë©´(í—ˆë¸Œ)ì€ <b>ì ˆëŒ€ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</b>
        </p>

        <div class="mt-5 flex flex-col gap-3">
          <button class="btn bg-indigo-600 text-white shadow-soft hover:bg-indigo-700 justify-between"
                  type="button" onclick="loadPage('mlst.html','MLST ì§„ë‹¨')">
            <span>ğŸ§ª MLST ì§„ë‹¨</span> <span class="kbd">mlst.html</span>
          </button>

          <button class="btn bg-slate-900 text-white shadow-soft hover:bg-black justify-between"
                  type="button" onclick="loadPage('scheduler.html','ìŠ¤ì¼€ì¤„ëŸ¬')">
            <span>ğŸ“… ìŠ¤ì¼€ì¤„ëŸ¬</span> <span class="kbd">scheduler.html</span>
          </button>

          <button class="btn bg-emerald-500 text-slate-950 shadow-soft hover:bg-emerald-400 justify-between"
                  type="button" onclick="loadPage('re-mind.html','RE-MIND ë¦¬í¬íŠ¸')">
            <span>ğŸ“ˆ RE-MIND ë¦¬í¬íŠ¸</span> <span class="kbd">re-mind.html</span>
          </button>

          <button class="btn bg-white/80 text-slate-900 shadow-soft hover:bg-white justify-between"
                  type="button" onclick="loadPage('index.html','í—ˆë¸Œ(í™ˆ)')">
            <span>ğŸ  í—ˆë¸Œ í™ˆ ë³´ê¸°</span> <span class="kbd">index.html</span>
          </button>
        </div>

        <!-- ìƒíƒœ ë°•ìŠ¤ -->
        <div class="mt-6 p-4 rounded-2xl bg-white/70 border border-white/50">
          <div class="text-[11px] font-black text-slate-500 tracking-widest uppercase">LocalStorage</div>
          <div class="mt-2 text-[13px] font-bold">
            MLST í”„ë¡œí•„: <span id="stProfile" class="font-black text-emerald-700">í™•ì¸ì¤‘â€¦</span>
          </div>
          <div class="mt-2 text-[13px] font-bold">
            ìŠ¤ì¼€ì¤„ ì •ì±…: <span id="stPolicy" class="font-black text-indigo-700">í™•ì¸ì¤‘â€¦</span>
          </div>

          <div class="mt-3 flex gap-2">
            <button class="btn bg-white text-slate-900 ring-soft hover:bg-slate-50"
                    type="button" onclick="refreshStatus()">â†» ìƒˆë¡œê³ ì¹¨</button>
            <button class="btn bg-rose-600 text-white hover:bg-rose-700 shadow-soft"
                    type="button" onclick="clearLocal()">ğŸ§¹ ì´ˆê¸°í™”</button>
          </div>
        </div>

        <div class="mt-5 text-[12px] text-slate-600 font-semibold">
          âœ… 404ê°€ ëœ¨ë©´: ì €ì¥ì†Œ rootì— íŒŒì¼ëª…ì´ ì •í™•íˆ ìˆëŠ”ì§€(ëŒ€/ì†Œë¬¸ì í¬í•¨) í™•ì¸í•˜ì„¸ìš”.
        </div>
      </div>

      <!-- RIGHT: ë·°ì–´(iframe) -->
      <div class="lg:col-span-8">
        <div class="relative rounded-[2.2rem] bg-white/10 border border-white/10 shadow-soft overflow-hidden">
          <div class="flex items-center justify-between px-5 py-3 border-b border-white/10">
            <div class="flex items-center gap-2">
              <span class="px-3 py-1 rounded-full bg-white/10 text-[11px] font-black text-white/80">Viewer</span>
              <div class="text-[13px] font-black" id="viewerTitle">í™ˆ(í—ˆë¸Œ ì•ˆë‚´)</div>
            </div>
            <div class="text-[12px] text-white/70 font-semibold" id="viewerPath">index.html</div>
          </div>

          <div class="p-4 md:p-5">
            <!-- í™ˆ ì•ˆë‚´(ê¸°ë³¸ í™”ë©´) -->
            <div id="homePanel" class="rounded-3xl bg-white/10 border border-white/10 p-6">
              <h3 class="text-xl md:text-2xl font-black">ì—¬ê¸°ì„œë¶€í„° ì‹œì‘í•˜ì„¸ìš”</h3>
              <p class="mt-2 text-white/80 text-[13px] font-semibold leading-relaxed">
                ì™¼ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, ì˜¤ë¥¸ìª½ í™”ë©´ì´ ë°”ë€Œë©´ì„œë„<br/>
                í—ˆë¸Œ(ì²« í˜ì´ì§€)ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
              </p>

              <div class="mt-5 grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="p-4 rounded-2xl bg-white/10 border border-white/10">
                  <div class="text-[10px] font-black tracking-widest text-white/60 uppercase">Step 1</div>
                  <div class="mt-1 font-black">MLST ì§„ë‹¨</div>
                  <div class="mt-1 text-[12px] text-white/70">ì§„ë‹¨ ê²°ê³¼ ì €ì¥</div>
                </div>
                <div class="p-4 rounded-2xl bg-white/10 border border-white/10">
                  <div class="text-[10px] font-black tracking-widest text-white/60 uppercase">Step 2</div>
                  <div class="mt-1 font-black">í”„ë¡¬í”„íŠ¸ ìƒì„±</div>
                  <div class="mt-1 text-[12px] text-white/70">ê³¼ëª©ë³„ ë£¨í‹´ ë³µì‚¬</div>
                </div>
                <div class="p-4 rounded-2xl bg-white/10 border border-white/10">
                  <div class="text-[10px] font-black tracking-widest text-white/60 uppercase">Step 3</div>
                  <div class="mt-1 font-black">ìŠ¤ì¼€ì¤„ëŸ¬ ë°˜ì˜</div>
                  <div class="mt-1 text-[12px] text-white/70">ë¸”ë¡/ë¹„ìœ¨ ìë™</div>
                </div>
              </div>
            </div>

            <!-- iframe ì˜ì—­ -->
            <div id="iframeWrap" class="hidden relative rounded-3xl overflow-hidden border border-white/10 bg-white">
              <div id="loader" class="loader">
                <div class="flex flex-col items-center gap-3">
                  <div class="spinner"></div>
                  <div class="text-white font-black">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div>
                </div>
              </div>

              <iframe id="viewer"
                      title="viewer"
                      src=""
                      class="w-full"
                      style="height: 78vh; border:0; background:#fff;"></iframe>
            </div>
          </div>
        </div>

        <p class="mt-3 text-center text-white/55 text-[12px] font-semibold">
          Â© MacEduTech Â· Hub(index.html)ì—ì„œ ëª¨ë“  í˜ì´ì§€ë¥¼ â€œë‚´ë¶€ ë¡œë“œâ€í•©ë‹ˆë‹¤.
        </p>
      </div>
    </section>
  </main>

  <script>
    const DEFAULT_PAGE = ""; // ì²˜ìŒì—” í™ˆíŒ¨ë„ ë³´ì—¬ì£¼ê¸°
    let currentPath = "index.html";

    function hasKey(key){
      try { return !!localStorage.getItem(key); } catch (e) { return false; }
    }

    function refreshStatus(){
      const stProfile = document.getElementById('stProfile');
      const stPolicy  = document.getElementById('stPolicy');

      const okProfile = hasKey("mlst_profile_v1");
      const okPolicy  = hasKey("mlst_schedule_policy_v1");

      stProfile.textContent = okProfile ? "ìˆìŒ âœ…" : "ì—†ìŒ âŒ";
      stPolicy.textContent  = okPolicy  ? "ìˆìŒ âœ…" : "ì—†ìŒ âŒ";
    }

    function clearLocal(){
      if(!confirm("ì €ì¥ëœ MLST ì§„ë‹¨ ë°ì´í„°/ì •ì±…ì„ ëª¨ë‘ ì‚­ì œí• ê¹Œìš”?")) return;
      try{
        localStorage.removeItem("mlst_profile_v1");
        localStorage.removeItem("mlst_schedule_policy_v1");
        alert("ì´ˆê¸°í™” ì™„ë£Œ!");
        refreshStatus();
      }catch(e){
        alert("ì´ˆê¸°í™” ì‹¤íŒ¨: ë¸Œë¼ìš°ì € ì €ì¥ì†Œ ì ‘ê·¼ì„ í™•ì¸í•˜ì„¸ìš”.");
      }
    }

    function setViewerHeader(title, path){
      document.getElementById("viewerTitle").textContent = title;
      document.getElementById("viewerPath").textContent = path;
    }
    function showHome(){
      currentPath = "index.html";
      setViewerHeader("í™ˆ(í—ˆë¸Œ ì•ˆë‚´)", "index.html");

      document.getElementById("homePanel").classList.remove("hidden");
      document.getElementById("iframeWrap").classList.add("hidden");

      // í•´ì‹œë„ ì •ë¦¬
      history.replaceState(null, "", location.pathname);
    }

    function loadPage(path, title){
      // í—ˆë¸Œ í™ˆ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ
      if(path === "index.html"){
        showHome();
        return;
      }

      currentPath = path;
      setViewerHeader(title, path);

      const homePanel = document.getElementById("homePanel");
      const iframeWrap = document.getElementById("iframeWrap");
      const iframe = document.getElementById("viewer");
      const loader = document.getElementById("loader");

      homePanel.classList.add("hidden");
      iframeWrap.classList.remove("hidden");

      // ë¡œë”© í‘œì‹œ
      loader.classList.add("on");

      // ìºì‹œ ì´ìŠˆ ì¤„ì´ê¸°(í•„ìš”ì‹œ): ?v=timestamp
      const bust = `?v=${Date.now()}`;
      iframe.src = path + bust;

      // ì£¼ì†Œì°½ì— í•´ì‹œë¡œ í˜„ì¬ ìƒíƒœ ë‚¨ê¸°ê¸°(ìƒˆë¡œê³ ì¹¨í•´ë„ ê°™ì€ í˜ì´ì§€ë¡œ)
      location.hash = encodeURIComponent(path);
    }

    function openInNewTab(){
      // í˜„ì¬ ë¡œë“œëœ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°
      if(!currentPath || currentPath === "index.html"){
        window.open("index.html", "_blank");
        return;
      }
      window.open(currentPath, "_blank");
    }

    // iframe ë¡œë”© ì™„ë£Œ ì‹œ ë¡œë” ë„ê¸°
    document.addEventListener("DOMContentLoaded", () => {
      refreshStatus();

      const iframe = document.getElementById("viewer");
      const loader = document.getElementById("loader");

      iframe.addEventListener("load", () => {
        // ë¡œë”© ë„ê¸°
        loader.classList.remove("on");
      });

      // í•´ì‹œê°€ ìˆìœ¼ë©´ í•´ë‹¹ í˜ì´ì§€ë¥¼ ìë™ ë¡œë“œ(ìƒˆë¡œê³ ì¹¨/ê³µìœ  ëŒ€ì‘)
      if(location.hash){
        const raw = decodeURIComponent(location.hash.replace("#","")).trim();
        if(raw && raw !== "index.html"){
          // íƒ€ì´í‹€ì€ íŒŒì¼ëª… ê¸°ë°˜ìœ¼ë¡œ ëŒ€ì¶© ì„¸íŒ…(ì›í•˜ë©´ ë§¤í•‘ í…Œì´ë¸” ë„£ì–´ë“œë¦¼)
          const title = raw.includes("mlst") ? "MLST ì§„ë‹¨"
                      : raw.includes("scheduler") ? "ìŠ¤ì¼€ì¤„ëŸ¬"
                      : raw.includes("re-mind") ? "RE-MIND ë¦¬í¬íŠ¸"
                      : "í˜ì´ì§€";
          loadPage(raw, title);
        } else {
          showHome();
        }
      } else if(DEFAULT_PAGE){
        loadPage(DEFAULT_PAGE, "í˜ì´ì§€");
      } else {
        showHome();
      }
    });
  </script>
</body>
</html>
